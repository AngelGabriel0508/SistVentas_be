<?xml version="1.0" encoding="UTF-8"?>
<!-- Created with Jaspersoft Studio version 6.20.6.final using JasperReports Library version 6.20.6-5c96b6aa8a39ac1dc6b6bea4b81168e16dd39231  -->
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="report_sale" pageWidth="595" pageHeight="842" columnWidth="555" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20" uuid="3c4c429a-4b87-49dd-9f57-4439c5be0f44">
	<property name="com.jaspersoft.studio.data.sql.tables" value=""/>
	<property name="com.jaspersoft.studio.data.defaultdataadapter" value="conexion_oracleDocker"/>
	<queryString language="SQL">
		<![CDATA[SELECT 
    s.id AS sale_id,
    s.date_time AS sale_date,
    c.names || ' ' || c.last_name AS client_full_name,
    v.names || ' ' || v.last_name AS seller_full_name,
    p.name AS product_name,
    sd.amount AS quantity_sold,
    p.price_sale AS sale_price,
    (sd.amount * p.price_sale) AS total_sale,
    total_purchases.total_purchase AS client_total_purchase
FROM 
    sale s
INNER JOIN 
    person c ON s.client_id = c.id
INNER JOIN 
    person v ON s.seller_id = v.id
INNER JOIN 
    sale_detall sd ON s.id = sd.sale_id
INNER JOIN 
    product p ON sd.product_id = p.id
INNER JOIN 
    (SELECT 
        c.id AS client_id,
        SUM(sd.amount * p.price_sale) AS total_purchase
    FROM 
        sale s
    INNER JOIN 
        person c ON s.client_id = c.id
    INNER JOIN 
        sale_detall sd ON s.id = sd.sale_id
    INNER JOIN 
        product p ON sd.product_id = p.id
    GROUP BY 
        c.id) total_purchases
ON c.id = total_purchases.client_id
ORDER BY 
    s.id]]>
	</queryString>
	<field name="SALE_ID" class="java.math.BigDecimal">
		<property name="com.jaspersoft.studio.field.name" value="SALE_ID"/>
		<property name="com.jaspersoft.studio.field.label" value="SALE_ID"/>
	</field>
	<field name="SALE_DATE" class="java.sql.Timestamp">
		<property name="com.jaspersoft.studio.field.name" value="SALE_DATE"/>
		<property name="com.jaspersoft.studio.field.label" value="SALE_DATE"/>
	</field>
	<field name="CLIENT_FULL_NAME" class="java.lang.String">
		<property name="com.jaspersoft.studio.field.name" value="CLIENT_FULL_NAME"/>
		<property name="com.jaspersoft.studio.field.label" value="CLIENT_FULL_NAME"/>
	</field>
	<field name="SELLER_FULL_NAME" class="java.lang.String">
		<property name="com.jaspersoft.studio.field.name" value="SELLER_FULL_NAME"/>
		<property name="com.jaspersoft.studio.field.label" value="SELLER_FULL_NAME"/>
	</field>
	<field name="PRODUCT_NAME" class="java.lang.String">
		<property name="com.jaspersoft.studio.field.name" value="PRODUCT_NAME"/>
		<property name="com.jaspersoft.studio.field.label" value="PRODUCT_NAME"/>
	</field>
	<field name="QUANTITY_SOLD" class="java.math.BigDecimal">
		<property name="com.jaspersoft.studio.field.name" value="QUANTITY_SOLD"/>
		<property name="com.jaspersoft.studio.field.label" value="QUANTITY_SOLD"/>
	</field>
	<field name="SALE_PRICE" class="java.math.BigDecimal">
		<property name="com.jaspersoft.studio.field.name" value="SALE_PRICE"/>
		<property name="com.jaspersoft.studio.field.label" value="SALE_PRICE"/>
	</field>
	<field name="TOTAL_SALE" class="java.math.BigDecimal">
		<property name="com.jaspersoft.studio.field.name" value="TOTAL_SALE"/>
		<property name="com.jaspersoft.studio.field.label" value="TOTAL_SALE"/>
	</field>
	<field name="CLIENT_TOTAL_PURCHASE" class="java.math.BigDecimal">
		<property name="com.jaspersoft.studio.field.name" value="CLIENT_TOTAL_PURCHASE"/>
		<property name="com.jaspersoft.studio.field.label" value="CLIENT_TOTAL_PURCHASE"/>
	</field>
	<group name="Group1" keepTogether="true">
		<groupExpression><![CDATA[$F{SALE_ID}]]></groupExpression>
		<groupHeader>
			<band height="44">
				<rectangle>
					<reportElement x="-1" y="2" width="555" height="35" forecolor="#FFFFFF" backcolor="#2F2DB3" uuid="18b3cc74-47ad-4292-bb39-311bffb00690"/>
				</rectangle>
				<textField>
					<reportElement x="1" y="4" width="39" height="30" forecolor="#FFFFFF" uuid="9b88f063-16c5-4b6d-80c0-484eb1d4b663"/>
					<textElement textAlignment="Center" verticalAlignment="Middle"/>
					<textFieldExpression><![CDATA[$F{SALE_ID}]]></textFieldExpression>
				</textField>
				<textField>
					<reportElement x="96" y="5" width="154" height="30" forecolor="#FFFFFF" uuid="6feb63da-f883-48ff-9574-2936a68432e7"/>
					<textElement textAlignment="Left" verticalAlignment="Middle"/>
					<textFieldExpression><![CDATA[$F{CLIENT_FULL_NAME}]]></textFieldExpression>
				</textField>
				<textField>
					<reportElement x="322" y="6" width="152" height="30" forecolor="#FFFFFF" uuid="03652090-8553-4dd1-bdcc-08ee2c6e11a8"/>
					<textElement textAlignment="Left" verticalAlignment="Middle"/>
					<textFieldExpression><![CDATA[$F{SELLER_FULL_NAME}]]></textFieldExpression>
				</textField>
				<staticText>
					<reportElement x="48" y="5" width="45" height="30" forecolor="#FFFFFF" uuid="19e14b66-27e5-4d18-90c6-433a0b2b5684"/>
					<textElement textAlignment="Right" verticalAlignment="Middle"/>
					<text><![CDATA[Cliente :]]></text>
				</staticText>
				<staticText>
					<reportElement x="262" y="4" width="57" height="33" forecolor="#FFFFFF" uuid="25c3562a-6f89-4efc-a651-32c34f3a2057"/>
					<textElement textAlignment="Right" verticalAlignment="Middle"/>
					<text><![CDATA[Vendedor :]]></text>
				</staticText>
				<textField>
					<reportElement x="474" y="5" width="80" height="30" forecolor="#FFFFFF" uuid="2486df97-263d-4d3b-a6c1-7da3a00db731"/>
					<textElement textAlignment="Center" verticalAlignment="Middle"/>
					<textFieldExpression><![CDATA[$F{SALE_DATE}]]></textFieldExpression>
				</textField>
			</band>
		</groupHeader>
	</group>
	<group name="Encabezado">
		<groupHeader>
			<band height="44">
				<rectangle>
					<reportElement x="-1" y="2" width="555" height="35" forecolor="#FFFFFF" backcolor="#9C9CF7" uuid="5bbdc9ca-70b2-4af6-9b93-fad111175965"/>
				</rectangle>
				<staticText>
					<reportElement x="170" y="4" width="102" height="30" uuid="7c27b6d4-c3eb-4de2-b665-7d546b76e2e1"/>
					<textElement textAlignment="Center" verticalAlignment="Middle">
						<font isBold="true"/>
					</textElement>
					<text><![CDATA[Cantidad]]></text>
				</staticText>
				<staticText>
					<reportElement x="28" y="4" width="130" height="30" uuid="10c355ae-27ef-46ec-8f2f-e666b73e03a1"/>
					<textElement textAlignment="Center" verticalAlignment="Middle">
						<font isBold="true"/>
					</textElement>
					<text><![CDATA[Producto]]></text>
				</staticText>
				<staticText>
					<reportElement mode="Transparent" x="294" y="4" width="112" height="30" backcolor="#FFFFFF" uuid="c51bc54c-e66f-41bf-9818-fc5fe02110f4"/>
					<textElement textAlignment="Center" verticalAlignment="Middle">
						<font isBold="true"/>
					</textElement>
					<text><![CDATA[Precio Venta]]></text>
				</staticText>
				<staticText>
					<reportElement x="428" y="4" width="94" height="30" uuid="bca8ae16-3d4f-47ed-b40e-b29bf3a7cb15"/>
					<textElement textAlignment="Center" verticalAlignment="Middle">
						<font isBold="true"/>
					</textElement>
					<text><![CDATA[Total]]></text>
				</staticText>
			</band>
		</groupHeader>
	</group>
	<group name="VentaTotal">
		<groupExpression><![CDATA[$F{CLIENT_TOTAL_PURCHASE}]]></groupExpression>
		<groupFooter>
			<band height="36">
				<staticText>
					<reportElement x="294" y="0" width="112" height="30" uuid="0a53c835-631e-4638-ac2e-6cbc9904cbfb"/>
					<textElement textAlignment="Center" verticalAlignment="Middle"/>
					<text><![CDATA[Total  a Pagar]]></text>
				</staticText>
				<textField>
					<reportElement x="430" y="4" width="91" height="22" uuid="9f8ca4ee-8ba0-475f-91b6-e31ebe7774fb"/>
					<textElement textAlignment="Center" verticalAlignment="Middle"/>
					<textFieldExpression><![CDATA[$F{CLIENT_TOTAL_PURCHASE}]]></textFieldExpression>
				</textField>
			</band>
		</groupFooter>
	</group>
	<background>
		<band splitType="Stretch"/>
	</background>
	<title>
		<band height="101" splitType="Stretch">
			<staticText>
				<reportElement x="5" y="0" width="50" height="15" uuid="e5588f63-02ce-49db-8936-ce5272d6558e">
					<property name="com.jaspersoft.studio.unit.height" value="px"/>
				</reportElement>
				<textElement verticalAlignment="Middle">
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[Empresa:]]></text>
			</staticText>
			<staticText>
				<reportElement x="60" y="1" width="85" height="16" uuid="7dcd84f6-4c68-49e5-a905-020a77980e2c"/>
				<textElement verticalAlignment="Middle"/>
				<text><![CDATA[Tienda Panchita]]></text>
			</staticText>
			<staticText>
				<reportElement x="5" y="23" width="50" height="15" uuid="00879d71-4edc-45f4-8da1-f583f57b0f43">
					<property name="com.jaspersoft.studio.unit.width" value="px"/>
					<property name="com.jaspersoft.studio.unit.height" value="px"/>
				</reportElement>
				<textElement verticalAlignment="Middle">
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[RUC: ]]></text>
			</staticText>
			<staticText>
				<reportElement x="55" y="24" width="70" height="16" uuid="c0aef355-c54e-4dc7-b94a-ab2545cd7ed5"/>
				<textElement verticalAlignment="Middle"/>
				<text><![CDATA[20780197782]]></text>
			</staticText>
			<staticText>
				<reportElement x="5" y="46" width="50" height="15" uuid="47f0f3c3-4942-4b40-8ea6-ca2956ba161e">
					<property name="com.jaspersoft.studio.unit.width" value="px"/>
					<property name="com.jaspersoft.studio.unit.height" value="px"/>
				</reportElement>
				<textElement verticalAlignment="Middle">
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[Dirección:]]></text>
			</staticText>
			<staticText>
				<reportElement x="58" y="41" width="147" height="28" uuid="9411b9cf-22b8-44bf-bbd4-ff073c829730"/>
				<textElement verticalAlignment="Middle"/>
				<text><![CDATA[Calle Cajamarca 4ta Cuadra - Cañete- Perú]]></text>
			</staticText>
			<staticText>
				<reportElement x="4" y="73" width="41" height="15" uuid="1a202415-c9b7-462f-bc62-2a173b6a7612">
					<property name="com.jaspersoft.studio.unit.width" value="px"/>
					<property name="com.jaspersoft.studio.unit.height" value="px"/>
				</reportElement>
				<textElement verticalAlignment="Middle">
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[Correo:]]></text>
			</staticText>
			<staticText>
				<reportElement x="53" y="72" width="147" height="16" uuid="3146bd58-4104-4414-a7bd-06f1a0d25605"/>
				<textElement verticalAlignment="Middle"/>
				<text><![CDATA[angel.castilla@vallegrande.edu.pe]]></text>
			</staticText>
			<staticText>
				<reportElement x="327" y="50" width="50" height="15" uuid="8b4e60a9-2f82-49e0-bfd6-f2a3f2f05e63">
					<property name="com.jaspersoft.studio.unit.width" value="px"/>
					<property name="com.jaspersoft.studio.unit.height" value="px"/>
				</reportElement>
				<textElement verticalAlignment="Middle">
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[Telefono:]]></text>
			</staticText>
			<staticText>
				<reportElement x="387" y="50" width="63" height="16" uuid="90575724-cdcc-4405-bd69-6bb59f2cff58"/>
				<textElement verticalAlignment="Middle"/>
				<text><![CDATA[936609401]]></text>
			</staticText>
			<textField pattern="MMMMM dd, yyyy">
				<reportElement x="400" y="15" width="92" height="14" uuid="7a25b988-2d9f-4cac-b571-cf5a3b62ac14"/>
				<textFieldExpression><![CDATA[new java.util.Date()]]></textFieldExpression>
			</textField>
			<textField pattern="HH:mm">
				<reportElement x="471" y="15" width="50" height="14" uuid="3d746dba-c6e1-4571-8928-26b62a6d5e0f"/>
				<textFieldExpression><![CDATA[new java.util.Date()]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="328" y="0" width="72" height="30" uuid="c3a22d8d-1193-49ac-8062-0b3af1cdf0e5"/>
				<textElement verticalAlignment="Middle">
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[Fecha y Hora de Impresión:]]></text>
			</staticText>
			<line>
				<reportElement x="-1" y="100" width="555" height="1" uuid="32c377b3-8089-4c62-be42-339a1a12b7da">
					<property name="com.jaspersoft.studio.unit.height" value="px"/>
					<property name="com.jaspersoft.studio.unit.width" value="px"/>
				</reportElement>
			</line>
		</band>
	</title>
	<pageHeader>
		<band height="36" splitType="Stretch">
			<staticText>
				<reportElement mode="Opaque" x="0" y="6" width="554" height="30" forecolor="#FFFFFF" backcolor="#336B87" uuid="d072a14f-ad4c-49c9-983b-46ce08b43928"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="12" isBold="true"/>
				</textElement>
				<text><![CDATA[Reporte de Ventas - Tienda Panchita]]></text>
			</staticText>
		</band>
	</pageHeader>
	<detail>
		<band height="33" splitType="Stretch">
			<textField>
				<reportElement x="28" y="-1" width="130" height="30" uuid="cd8c660a-a000-4e25-8add-9ee8379615c4"/>
				<textElement textAlignment="Center" verticalAlignment="Middle"/>
				<textFieldExpression><![CDATA[$F{PRODUCT_NAME}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="170" y="-1" width="102" height="30" uuid="e7cc9fab-44cb-4aa4-b488-eccb2bf897c2"/>
				<textElement textAlignment="Center" verticalAlignment="Middle"/>
				<textFieldExpression><![CDATA[$F{QUANTITY_SOLD}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="294" y="0" width="112" height="30" uuid="9d1442e8-e806-4a5a-a71a-ee5fa5bcc767">
					<property name="com.jaspersoft.studio.unit.height" value="px"/>
				</reportElement>
				<textElement textAlignment="Center" verticalAlignment="Middle"/>
				<textFieldExpression><![CDATA[$F{SALE_PRICE}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="428" y="-1" width="93" height="30" uuid="c64e2733-6f2c-4d5d-a681-edad46e1d552">
					<property name="com.jaspersoft.studio.unit.height" value="px"/>
				</reportElement>
				<textElement textAlignment="Center" verticalAlignment="Middle"/>
				<textFieldExpression><![CDATA[$F{TOTAL_SALE}]]></textFieldExpression>
			</textField>
		</band>
	</detail>
	<pageFooter>
		<band height="37" splitType="Stretch">
			<staticText>
				<reportElement x="0" y="3" width="430" height="30" uuid="9f8fb8da-a8a3-4c68-91ef-523bcd9cdaff"/>
				<text><![CDATA[Representacion impresa de reportes de clientes de la tienda online Tienda Panchita.
Para mas informacion consulte a la pagina https://www.yocomproenlatiendapanchita.com.pe
]]></text>
			</staticText>
		</band>
	</pageFooter>
</jasperReport>
